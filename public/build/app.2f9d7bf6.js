/*! For license information please see app.2f9d7bf6.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[524],{1735:(t,e,n)=>{n(8706);var r;r=function(t){var e,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";console.log("[UI] ".concat(o.toUpperCase(),": ").concat(t)),"function"==typeof r&&(null===(e=(n=window).showToast)||void 0===e||e.call(n,t,o))}},2879:(t,e,n)=>{function r(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,i,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return o(l,"_invoke",function(n,r,o){var i,a,c,s=0,l=o||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,a=0,c=t,f.n=n,u}};function p(n,r){for(a=n,c=r,e=0;!d&&s&&!o&&e<l.length;e++){var o,i=l[e],p=f.p,v=i[2];n>3?(o=v===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(a=0,f.v=r,f.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,f.n=v,a=0))}if(o||n>1)return u;throw d=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,v),a=l,c=v;(e=a<2?t:c)||!d;){i||(a?a<3?(a>1&&(f.n=-1),p(a,c)):f.n=c:f.v=c);try{if(s=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(d=f.n<0)?c:n.call(r,f))!==u)break}catch(e){i=t,a=1,c=e}finally{s=1}}return{value:e,done:d}}}(n,i,a),!0),l}var u={};function s(){}function l(){}function d(){}e=Object.getPrototypeOf;var f=[][i]?e(e([][i]())):(o(e={},i,function(){return this}),e),p=d.prototype=s.prototype=Object.create(f);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,o(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=d,o(p,"constructor",d),o(d,"constructor",l),l.displayName="GeneratorFunction",o(d,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,i,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:c,m:v}})()}function o(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}o=function(t,e,n,r){function a(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},o(t,e,n,r)}function i(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function c(t){i(a,r,o,c,u,"next",t)}function u(t){i(a,r,o,c,u,"throw",t)}c(void 0)})}}n(2675),n(9463),n(6280),n(6918),n(8706),n(1629),n(4423),n(739),n(4170),n(3110),n(9904),n(4185),n(875),n(9432),n(3548),n(287),n(6099),n(8940),n(3362),n(1699),n(8992),n(3949),n(3500),n(6031),function(){"use strict";var t=10;function e(t){var e=document.querySelector("[data-cart-urls]");return e&&JSON.parse(e.dataset.cartUrls||"{}")[t]||null}document.addEventListener("DOMContentLoaded",function(){console.log("[Detail] Initializing page components"),function(){var e=document.getElementById("quantity"),n=document.getElementById("decrease-qty"),r=document.getElementById("increase-qty");if(!e||!n||!r)return;n.addEventListener("click",function(){var t=parseInt(e.value);t>1&&(e.value=t-1)}),r.addEventListener("click",function(){var n=parseInt(e.value);n<t&&(e.value=n+1)}),e.addEventListener("change",function(){var e=parseInt(this.value);isNaN(e)||e<1?this.value=1:e>t&&(this.value=t)})}(),function(){document.querySelectorAll("[data-share]").forEach(function(t){t.addEventListener("click",function(t){t.preventDefault();var e=this.dataset.share,n=encodeURIComponent(window.location.href),r=encodeURIComponent(document.title),o="";switch(e){case"facebook":o="https://www.facebook.com/sharer/sharer.php?u=".concat(n);break;case"twitter":o="https://twitter.com/intent/tweet?url=".concat(n,"&text=").concat(r);break;case"whatsapp":o="https://wa.me/?text=".concat(r,"%20").concat(n);break;case"email":o="mailto:?subject=".concat(r,"&body=").concat(n)}o&&window.open(o,"_blank","width=600,height=400")})});var t=document.getElementById("native-share");t&&navigator.share&&(t.style.display="inline-block",t.addEventListener("click",a(r().m(function t(){return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,navigator.share({title:document.title,url:window.location.href});case 1:t.n=3;break;case 2:t.p=2,t.v,console.log("[Share] Native share cancelled or failed");case 3:return t.a(2)}},t,null,[[0,2]])}))))}(),function(){var t=document.getElementById("add-to-cart-btn");if(!t)return;t.addEventListener("click",function(){!function(t,n){var r=e("add");if(!r)return void console.error("[Cart] Add URL not found");var o=document.getElementById("add-to-cart-btn"),i=o.innerHTML;o.disabled=!0,o.innerHTML='<span class="spinner-border spinner-border-sm me-2"></span>Adding...',fetch(r,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({isbn:t,quantity:n})}).then(function(t){return t.json()}).then(function(t){t.success?(!function(){var t=e("count");if(!t)return;fetch(t).then(function(t){return t.json()}).then(function(t){var e=document.getElementById("cart-badge");e&&(e.textContent=t.count,e.style.display=t.count>0?"inline":"none",e.classList.add("pulse"),setTimeout(function(){return e.classList.remove("pulse")},500))}).catch(function(t){return console.error("[Cart] Badge update failed:",t)})}(),"undefined"!=typeof showToast&&showToast("".concat(n," libro(s) agregado(s) al carrito"),"success"),document.getElementById("quantity").value=1,o.classList.add("btn-success"),o.innerHTML='<i class="bi bi-check-lg"></i> Agregado',setTimeout(function(){o.classList.remove("btn-success"),o.innerHTML=i,o.disabled=!1},2e3)):("undefined"!=typeof showToast&&showToast(t.message||"Error al agregar al carrito","danger"),o.innerHTML=i,o.disabled=!1)}).catch(function(t){console.error("[Cart] Error al agregar:",t),"undefined"!=typeof showToast&&showToast("Error de conexión","danger"),o.innerHTML=i,o.disabled=!1})}(this.dataset.isbn,parseInt(document.getElementById("quantity").value))})}(),function(){var t=document.querySelector(".book-main-image");if(!t)return;t.addEventListener("click",function(){var t=document.createElement("div");t.className="modal fade",t.innerHTML='\n                <div class="modal-dialog modal-dialog-centered modal-lg">\n                    <div class="modal-content">\n                        <div class="modal-body p-0">\n                            <button type="button" class="btn-close position-absolute top-0 end-0 m-3 bg-white" data-bs-dismiss="modal"></button>\n                            <img src="'.concat(this.src,'" class="img-fluid" alt="').concat(this.alt,'">\n                        </div>\n                    </div>\n                </div>\n            '),document.body.appendChild(t),new bootstrap.Modal(t).show(),t.addEventListener("hidden.bs.modal",function(){t.remove()})})}(),function(){var t=document.querySelectorAll('input[name="currency-detail"]');if(0===t.length)return;t.forEach(function(t){t.addEventListener("change",function(){!function(t){var e=document.querySelectorAll(".price-usd"),n=document.querySelectorAll(".price-pen"),r=document.querySelectorAll(".conversion-usd"),o=document.querySelectorAll(".conversion-pen");t?(e.forEach(function(t){return t.style.display="inline"}),n.forEach(function(t){return t.style.display="none"}),r.forEach(function(t){return t.style.display="inline"}),o.forEach(function(t){return t.style.display="none"})):(e.forEach(function(t){return t.style.display="none"}),n.forEach(function(t){return t.style.display="inline"}),r.forEach(function(t){return t.style.display="none"}),o.forEach(function(t){return t.style.display="inline"}));var i=document.getElementById("price-display");i&&(i.classList.add("price-animate"),setTimeout(function(){return i.classList.remove("price-animate")},300))}(this.id.includes("usd"))})})}(),console.log("[Detail] Page initialized")});var n=document.createElement("style");n.textContent="\n        @keyframes slideInRight {\n            from {\n                transform: translateX(100%);\n                opacity: 0;\n            }\n            to {\n                transform: translateX(0);\n                opacity: 1;\n            }\n        }\n\n        @keyframes pulse {\n            0%, 100% { transform: scale(1); }\n            50% { transform: scale(1.2); }\n        }\n\n        .pulse {\n            animation: pulse 0.5s ease-in-out;\n        }\n\n        .book-main-image {\n            cursor: zoom-in;\n        }\n\n        .price-animate {\n            animation: pulse 0.3s ease-in-out;\n        }\n    ",document.head.appendChild(n)}()},4028:(t,e,n)=>{"use strict";n(7314),n(4497),n(6781),n(2879),n(7110),n(5709),n(5123),n(5085),n(7728),n(1735)},4497:(t,e,n)=>{n(1629),n(6099),n(3362),n(2762),n(8992),n(3949),n(3500),n(6031),function(){"use strict";function t(){fetch("/carrito/count").then(function(t){return t.json()}).then(function(t){var e=document.getElementById("cart-badge");e&&(e.textContent=t.count||0,t.count>0?(e.style.display="flex",e.classList.add("pulse-once"),setTimeout(function(){return e.classList.remove("pulse-once")},500)):e.style.display="none")}).catch(function(t){return console.error("[Cart] Badge update failed:",t)})}document.addEventListener("DOMContentLoaded",function(){console.log("[Navbar] Initializing components"),function(){var t=document.querySelector(".navbar-modern");if(!t)return;window.addEventListener("scroll",function(){window.scrollY>50?t.classList.add("scrolled"):t.classList.remove("scrolled")}),document.addEventListener("click",function(t){document.querySelectorAll(".dropdown-menu.show").forEach(function(e){if(!e.parentElement.contains(t.target)){var n,r=e.previousElementSibling;if(r)null===(n=bootstrap.Dropdown.getInstance(r))||void 0===n||n.hide()}})})}(),t(),document.addEventListener("cart:updated",t),document.querySelectorAll('a[href^="#"]').forEach(function(t){t.addEventListener("click",function(t){var e=this.getAttribute("href");if("#"!==e){t.preventDefault();var n=document.querySelector(e);n&&n.scrollIntoView({behavior:"smooth",block:"start"})}})}),function(){var t=document.getElementById("scrollToTop");if(!t)return;window.addEventListener("scroll",function(){window.scrollY>300?t.classList.add("visible"):t.classList.remove("visible")}),t.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})}(),console.log("[Navbar] Components initialized")});var e=document.createElement("style");e.textContent="\n        .navbar-modern.scrolled {\n            box-shadow: var(--shadow-lg);\n        }\n\n        @keyframes pulse-once {\n            0%, 100% {\n                transform: scale(1);\n            }\n            50% {\n                transform: scale(1.3);\n            }\n        }\n\n        .pulse-once {\n            animation: pulse-once 0.5s ease-in-out;\n        }\n    ",document.head.appendChild(e)}()},5085:(t,e,n)=>{function r(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,i,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return o(l,"_invoke",function(n,r,o){var i,a,c,s=0,l=o||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,a=0,c=t,f.n=n,u}};function p(n,r){for(a=n,c=r,e=0;!d&&s&&!o&&e<l.length;e++){var o,i=l[e],p=f.p,v=i[2];n>3?(o=v===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(a=0,f.v=r,f.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,f.n=v,a=0))}if(o||n>1)return u;throw d=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,v),a=l,c=v;(e=a<2?t:c)||!d;){i||(a?a<3?(a>1&&(f.n=-1),p(a,c)):f.n=c:f.v=c);try{if(s=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(d=f.n<0)?c:n.call(r,f))!==u)break}catch(e){i=t,a=1,c=e}finally{s=1}}return{value:e,done:d}}}(n,i,a),!0),l}var u={};function s(){}function l(){}function d(){}e=Object.getPrototypeOf;var f=[][i]?e(e([][i]())):(o(e={},i,function(){return this}),e),p=d.prototype=s.prototype=Object.create(f);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,o(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=d,o(p,"constructor",d),o(d,"constructor",l),l.displayName="GeneratorFunction",o(d,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,i,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:c,m:v}})()}function o(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}o=function(t,e,n,r){function a(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},o(t,e,n,r)}function i(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function c(t){i(a,r,o,c,u,"next",t)}function u(t){i(a,r,o,c,u,"throw",t)}c(void 0)})}}n(2675),n(9463),n(6280),n(6918),n(3418),n(2062),n(4170),n(9904),n(4185),n(875),n(3548),n(287),n(6099),n(3362),n(7764),n(8992),n(1454);var c,u,s,l,d,f,p,v,y=(u={createSession:"/api/checkout/create-session"},s={button:"#checkout-button",stripeKey:"[data-stripe-key]",cartItem:"[data-isbn]"},l=function(){return document.querySelector(s.button)},d=function(){var t;return null===(t=document.querySelector(s.stripeKey))||void 0===t?void 0:t.dataset.stripeKey},f=function(){return Array.from(document.querySelectorAll(s.cartItem)).map(function(t){return{isbn:t.dataset.isbn}})},p={createSession:(c=a(r().m(function t(e){return r().w(function(t){for(;;)if(0===t.n)return t.a(2,APIModule.post(u.createSession,{items:e}))},t)})),function(t){return c.apply(this,arguments)})},v=function(t,e){Stripe(e).redirectToCheckout({sessionId:t})},{submit:function(){var t=a(r().m(function t(){var e,n,o,i,a;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=l()){t.n=1;break}return t.a(2);case 1:if(UIModule.loading(e,!0),t.p=2,0!==(n=f()).length){t.n=3;break}throw new Error("Carrito vacío");case 3:return t.n=4,p.createSession(n);case 4:if(!(o=t.v).error){t.n=5;break}throw new Error(o.error);case 5:if(i=d()){t.n=6;break}throw new Error("Clave de Stripe no configurada");case 6:StorageModule.clear(),v(o.sessionId,i),t.n=8;break;case 7:t.p=7,a=t.v,console.error("[Checkout Error]",a),UIModule.showToast(a.message||"Error al procesar","danger"),UIModule.loading(e,!1);case 8:return t.a(2)}},t,null,[[2,7]])}));return function(){return t.apply(this,arguments)}}()});window.proceedToCheckout=function(){return y.submit()}},5123:(t,e,n)=>{n(8706),n(3418),n(2062),n(6099),n(8940),n(7764),n(8992),n(1454);var r,o,i,a=(r={cartItem:"[data-isbn]",quantityInput:'input[type="text"]',cartCount:"#cart-count"},i={sync:function(){var t=o.getCartItems();StorageModule.set(t),o.updateCartCount(t.length)}},{updateQuantity:function(t,e){var n=document.querySelector("".concat(r.cartItem,'[data-isbn="').concat(t,'"]'));if(n){var o=n.querySelector(r.quantityInput);if(o){var a=parseInt(o.value)||1;a=Math.max(1,a+e),o.value=a,i.sync(),console.log("[Cart] ISBN ".concat(t," - Cantidad: ").concat(a))}}},removeItem:function(t){if(confirm("¿Eliminar este libro?")){var e=document.querySelector("".concat(r.cartItem,'[data-isbn="').concat(t,'"]'));e&&(e.remove(),i.sync(),UIModule.showToast("Libro eliminado","success"))}},init:function(){i.sync()},getItems:(o={getCartItems:function(){return Array.from(document.querySelectorAll(r.cartItem)).map(function(t){var e;return{isbn:t.dataset.isbn,cantidad:parseInt(null===(e=t.querySelector(r.quantityInput))||void 0===e?void 0:e.value)||1}})},updateCartCount:function(t){var e=document.querySelector(r.cartCount);e&&(e.textContent=t,e.style.display=t>0?"inline-block":"none")}}).getCartItems,sync:i.sync});window.updateQuantity=function(t,e){return a.updateQuantity(t,e)},window.removeFromCart=function(t){return a.removeItem(t)},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return a.init()}):a.init()},5709:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return i(l,"_invoke",function(n,r,o){var i,a,c,s=0,l=o||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,a=0,c=t,f.n=n,u}};function p(n,r){for(a=n,c=r,e=0;!d&&s&&!o&&e<l.length;e++){var o,i=l[e],p=f.p,v=i[2];n>3?(o=v===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(a=0,f.v=r,f.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,f.n=v,a=0))}if(o||n>1)return u;throw d=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,v),a=l,c=v;(e=a<2?t:c)||!d;){i||(a?a<3?(a>1&&(f.n=-1),p(a,c)):f.n=c:f.v=c);try{if(s=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(d=f.n<0)?c:n.call(r,f))!==u)break}catch(e){i=t,a=1,c=e}finally{s=1}}return{value:e,done:d}}}(n,o,a),!0),l}var u={};function s(){}function l(){}function d(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(i(e={},r,function(){return this}),e),p=d.prototype=s.prototype=Object.create(f);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,i(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=d,i(p,"constructor",d),i(d,"constructor",l),l.displayName="GeneratorFunction",i(d,a,"GeneratorFunction"),i(p),i(p,a,"Generator"),i(p,r,function(){return this}),i(p,"toString",function(){return"[object Generator]"}),(o=function(){return{w:c,m:v}})()}function i(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}i=function(t,e,n,r){function a(e,n){i(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},i(t,e,n,r)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){u(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function u(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}n(2675),n(9463),n(2259),n(5700),n(6280),n(6918),n(8706),n(2008),n(1629),n(3792),n(4114),n(739),n(9572),n(4170),n(3110),n(8130),n(9904),n(7945),n(4185),n(3851),n(1278),n(875),n(9432),n(3548),n(287),n(6099),n(3362),n(7764),n(8992),n(4520),n(3949),n(3500),n(2953);var l,d;l="",d=function(){var t,e=(t=o().m(function t(e){var n,r,i,a,u=arguments;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},r=c(c({},{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}),n),t.p=1,console.log("[API] ".concat(r.method," ").concat(e)),t.n=2,fetch("".concat(l).concat(e),r);case 2:if((i=t.v).ok){t.n=3;break}throw new Error("HTTP ".concat(i.status));case 3:return t.n=4,i.json();case 4:return t.a(2,t.v);case 5:throw t.p=5,a=t.v,console.error("[API Error] ".concat(e,":"),a),a;case 6:return t.a(2)}},t,null,[[1,5]])}),function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){s(i,r,o,a,c,"next",t)}function c(t){s(i,r,o,a,c,"throw",t)}a(void 0)})});return function(t){return e.apply(this,arguments)}}()},6781:(t,e,n)=>{function r(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,i,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return o(l,"_invoke",function(n,r,o){var i,a,c,s=0,l=o||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,a=0,c=t,f.n=n,u}};function p(n,r){for(a=n,c=r,e=0;!d&&s&&!o&&e<l.length;e++){var o,i=l[e],p=f.p,v=i[2];n>3?(o=v===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(a=0,f.v=r,f.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,f.n=v,a=0))}if(o||n>1)return u;throw d=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,v),a=l,c=v;(e=a<2?t:c)||!d;){i||(a?a<3?(a>1&&(f.n=-1),p(a,c)):f.n=c:f.v=c);try{if(s=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(d=f.n<0)?c:n.call(r,f))!==u)break}catch(e){i=t,a=1,c=e}finally{s=1}}return{value:e,done:d}}}(n,i,a),!0),l}var u={};function s(){}function l(){}function d(){}e=Object.getPrototypeOf;var f=[][i]?e(e([][i]())):(o(e={},i,function(){return this}),e),p=d.prototype=s.prototype=Object.create(f);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,o(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=d,o(p,"constructor",d),o(d,"constructor",l),l.displayName="GeneratorFunction",o(d,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,i,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:c,m:v}})()}function o(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}o=function(t,e,n,r){function a(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},o(t,e,n,r)}function i(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function c(t){i(a,r,o,c,u,"next",t)}function u(t){i(a,r,o,c,u,"throw",t)}c(void 0)})}}n(2675),n(9463),n(6280),n(6918),n(1629),n(4170),n(9904),n(4185),n(875),n(3548),n(287),n(6099),n(3362),n(8992),n(3949),n(3500),n(6031),function(){"use strict";function t(){return e.apply(this,arguments)}function e(){return(e=a(r().m(function t(){var e,n,o;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,APIModule.get("/carrito/count");case 1:e=t.v,(n=document.querySelector("#cart-badge"))&&(n.textContent=e.count||0,n.style.display=e.count>0?"flex":"none",n.classList.add("pulse-once"),setTimeout(function(){return n.classList.remove("pulse-once")},500)),t.n=3;break;case 2:t.p=2,o=t.v,console.error("[Cart] Error updating badge:",o);case 3:return t.a(2)}},t,null,[[0,2]])}))).apply(this,arguments)}function n(t){var e=t.closest(".category-section-modern");if(e){var n=e.querySelector(".scroll-indicators");if(n){var r=n.querySelectorAll(".scroll-dot");if(0!==r.length){var o=t.scrollLeft,i=t.scrollWidth-t.clientWidth,a=i>0?o/i:0,c=Math.round(a*(r.length-1));r.forEach(function(t,e){t.classList.toggle("active",e===c)})}}}}document.addEventListener("DOMContentLoaded",function(){var e;console.log("[Home] Initializing page components"),function(){if("undefined"==typeof Swiper)return void console.error("[Swiper] Library not loaded");new Swiper(".heroSwiper",{loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},speed:600,slidesPerView:1,spaceBetween:0,on:{init:function(){console.log("[Swiper] Hero carousel initialized")}}})}(),t(),document.addEventListener("cart:updated",t),function(){if("IntersectionObserver"in window){var t=new IntersectionObserver(function(t,e){t.forEach(function(t){if(t.isIntersecting){var n=t.target;n.dataset.src&&(n.src=n.dataset.src,n.classList.remove("lazy"),e.unobserve(n))}})});document.querySelectorAll("img.lazy").forEach(function(e){return t.observe(e)})}}(),e=document.querySelectorAll(".books-scroll-wrapper-pro"),console.log("[Scroll] Initializing",e.length,"containers"),e.forEach(function(t){t.addEventListener("scroll",function(){n(t)}),n(t)}),document.querySelectorAll(".books-scroll-container").forEach(function(t){var e=t.querySelector(".books-scroll-wrapper-pro"),n=t.querySelector(".scroll-btn-left"),r=t.querySelector(".scroll-btn-right");function o(){var t=e.scrollLeft,o=e.scrollWidth-e.clientWidth;t<=0?(n.style.opacity="0.5",n.style.cursor="not-allowed"):(n.style.opacity="1",n.style.cursor="pointer"),t>=o-1?(r.style.opacity="0.5",r.style.cursor="not-allowed"):(r.style.opacity="1",r.style.cursor="pointer")}e&&n&&r&&(e.addEventListener("scroll",o),o())}),document.querySelectorAll(".scroll-dot").forEach(function(t,e){t.addEventListener("click",function(){var t=this.parentElement,n=t.closest(".category-section-modern").querySelector(".books-scroll-wrapper-pro");if(n){var r=n.scrollWidth-n.clientWidth,o=t.querySelectorAll(".scroll-dot"),i=r*(e/(o.length-1));n.scrollTo({left:i,behavior:"smooth"})}})}),console.log("[Home] Page initialized successfully")}),window.addToCart=function(e){var n,o={addBook:(n=a(r().m(function e(n){var o,i,a,c,u;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return i=null===(o=event)||void 0===o||null===(o=o.target)||void 0===o?void 0:o.closest("button"),a=i?i.innerHTML:"",UIModule.loading(i,!0),e.p=1,e.n=2,APIModule.post("/carrito/agregar",{isbn:n,quantity:1});case 2:if(!(c=e.v).success){e.n=4;break}return e.n=3,t();case 3:UIModule.showToast("Libro agregado al carrito","success"),document.dispatchEvent(new CustomEvent("cart:updated",{detail:{isbn:n}})),e.n=5;break;case 4:UIModule.showToast(c.message||"Error al agregar","danger");case 5:e.n=7;break;case 6:e.p=6,u=e.v,console.error("[Cart] Error:",u),UIModule.showToast("Error de conexión","danger");case 7:return e.p=7,i&&(i.disabled=!1,i.innerHTML=a),e.f(7);case 8:return e.a(2)}},e,null,[[1,6,7,8]])})),function(t){return n.apply(this,arguments)})};o.addBook(e)},window.scrollBooks=function(t,e){var r=t.parentElement.querySelector(".books-scroll-wrapper-pro");if(r){"left"===e?r.scrollBy({left:-300,behavior:"smooth"}):r.scrollBy({left:300,behavior:"smooth"}),setTimeout(function(){return n(r)},350)}else console.error("[Scroll] Container not found")}}()},7110:()=>{var t={init:function(){console.log("[Page] Search inicializado")}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return t.init()}):t.init()},7314:(t,e,n)=>{function r(){var t,e,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,i,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return o(l,"_invoke",function(n,r,o){var i,a,c,s=0,l=o||[],d=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,a=0,c=t,f.n=n,u}};function p(n,r){for(a=n,c=r,e=0;!d&&s&&!o&&e<l.length;e++){var o,i=l[e],p=f.p,v=i[2];n>3?(o=v===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(a=0,f.v=r,f.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,f.n=v,a=0))}if(o||n>1)return u;throw d=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,v),a=l,c=v;(e=a<2?t:c)||!d;){i||(a?a<3?(a>1&&(f.n=-1),p(a,c)):f.n=c:f.v=c);try{if(s=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(d=f.n<0)?c:n.call(r,f))!==u)break}catch(e){i=t,a=1,c=e}finally{s=1}}return{value:e,done:d}}}(n,i,a),!0),l}var u={};function s(){}function l(){}function d(){}e=Object.getPrototypeOf;var f=[][i]?e(e([][i]())):(o(e={},i,function(){return this}),e),p=d.prototype=s.prototype=Object.create(f);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,o(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=d,o(p,"constructor",d),o(d,"constructor",l),l.displayName="GeneratorFunction",o(d,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,i,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:c,m:v}})()}function o(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}o=function(t,e,n,r){function a(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},o(t,e,n,r)}function i(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}n(2675),n(9463),n(6280),n(6918),n(8706),n(1629),n(3418),n(2062),n(4782),n(9089),n(4170),n(9904),n(4185),n(875),n(3548),n(287),n(6099),n(3362),n(7764),n(8992),n(3949),n(1454),n(3500),n(6031),function(){"use strict";function t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,r=function(){var t=document.getElementById("toast-container");t||((t=document.createElement("div")).id="toast-container",t.className="toast-container position-fixed top-0 end-0 p-3",t.style.zIndex="9999",document.body.appendChild(t));return t}(),o="toast-"+Date.now(),i='\n            <div id="'.concat(o,'" class="toast align-items-center text-bg-').concat(e,' border-0" role="alert">\n                <div class="d-flex">\n                    <div class="toast-body">\n                        <i class="bi bi-').concat({success:"check-circle-fill",danger:"x-circle-fill",warning:"exclamation-triangle-fill",info:"info-circle-fill"}[e],' me-2"></i>\n                        ').concat(t,'\n                    </div>\n                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>\n                </div>\n            </div>\n        ');r.insertAdjacentHTML("beforeend",i);var a=document.getElementById(o);new bootstrap.Toast(a,{delay:n}).show(),a.addEventListener("hidden.bs.toast",function(){a.remove()})}function e(){var n;return n=r().m(function e(n){var o;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,navigator.clipboard.writeText(n);case 1:return t("Copiado al portapapeles","success"),e.a(2,!0);case 2:return e.p=2,o=e.v,console.error("[Portapapeles] Error al copiar:",o),t("Error al copiar","danger"),e.a(2,!1)}},e,null,[[0,2]])}),e=function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function c(t){i(a,r,o,c,u,"next",t)}function u(t){i(a,r,o,c,u,"throw",t)}c(void 0)})},e.apply(this,arguments)}document.addEventListener("DOMContentLoaded",function(){var t;console.log("[App] Initializing global components"),[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(t){return new bootstrap.Tooltip(t)}),[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map(function(t){return new bootstrap.Popover(t)}),function(){if("IntersectionObserver"in window){var t=new IntersectionObserver(function(t,e){t.forEach(function(t){if(t.isIntersecting){var n=t.target;n.dataset.src&&(n.src=n.dataset.src,n.classList.remove("lazy"),n.classList.add("loaded"),e.unobserve(n))}})},{rootMargin:"50px"});document.querySelectorAll("img.lazy").forEach(function(e){t.observe(e)})}}(),t=document.querySelectorAll(".needs-validation"),Array.from(t).forEach(function(t){t.addEventListener("submit",function(e){t.checkValidity()||(e.preventDefault(),e.stopPropagation()),t.classList.add("was-validated")},!1)}),console.log("[App] Global components initialized")}),window.showToast=t,window.formatPrice=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("es-PE",{style:"currency",currency:e}).format(t)},window.copyToClipboard=function(t){return e.apply(this,arguments)},window.debounce=function(t,e){var n;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];clearTimeout(n),n=setTimeout(function(){clearTimeout(n),t.apply(void 0,o)},e)}}}()},7728:(t,e,n)=>{n(1688),n(739),n(3288),n(3110),n(9432);var r,o;r="tkoh_cart",o="1.0"}},t=>{t.O(0,[841],()=>{return e=4028,t(t.s=e);var e});t.O()}]);